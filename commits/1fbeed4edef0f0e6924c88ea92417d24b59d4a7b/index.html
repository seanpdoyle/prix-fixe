<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Use the title from a page's frontmatter if it has one -->
    <title>Pass `model:` instead of `url:` in `notes#new`
</title>
    <link href="../../stylesheets/site.css" rel="stylesheet" />
    <script src="../../javascripts/site.js"></script>
  </head>
  <body class="page">
    <header class="header">
      <h1 class="header__name">
<a href="../../">          prix-fixe
</a>      </h1>


      <nav class="
        header__navigation
        navigation
        
      ">
<a href="../df8d72a1d49abe15a5a9cdead74f71b7bc3607e2/">              &#8592; Previous
</a>
<a href="../d74173c1e48edafae5dba19b2e8e643b4aadfaa5/">              Next &#8594;
</a>      </nav>
    </header>

    <main class="content">
      <details class="accordion content__item">
        <summary class="accordion__summary">
          <div class="accordion__closed">
            <nav class="
              commit-history
              u-db-overflow-y--auto
              u-mb-overflow-x--scroll
            ">
                <a href="../1106e13e2568ee68f1528e4ac3e42070ad24dfc6/" class="commit-node commit-node--collapsed" title="[GENERATED] Initial Commit
"></a>
                <a href="../65bf913763168f594a3873bcd9d0f6577602c986/" class="commit-node commit-node--collapsed" title="Elaborate on the project's goals in the README
"></a>
                <a href="../6d1482de076a391b14b055aba66413577d326997/" class="commit-node commit-node--collapsed" title="Un-comment remaining `Gemfile` dependencies
"></a>
                <a href="../92ce75d8cdd5545f738507b2e439ba0f3b484447/" class="commit-node commit-node--collapsed" title="Create `git-read` GitHub Action
"></a>
                <a href="../2f4ddaa45b452eef76f6d5401c8861982d665fe1/" class="commit-node commit-node--collapsed" title="Execute the Rails-generated `bin/setup` script
"></a>
                <a href="../22f0e2809ccc0630bd186b714b49c239e6f69ee2/" class="commit-node commit-node--collapsed" title="Add `UserSharesAMessageTest`
"></a>
                <a href="../5518e5f2ee312fdad71bf543d0a697eba064a926/" class="commit-node commit-node--collapsed" title="Add a failing system test
"></a>
                <a href="../4be7e7af67b9800d40decc7ea7c19dae28c5212a/" class="commit-node commit-node--collapsed" title="Declare `GET &quot;/&quot;` route
"></a>
                <a href="../43174ba20f6820d5b9f452c1ce25c73c2c488bcf/" class="commit-node commit-node--collapsed" title="Declare `NotesController`
"></a>
                <a href="../106f8b2f0547e5825caf558dc87297b6d1756b62/" class="commit-node commit-node--collapsed" title="Extend from `ApplicationController`
"></a>
                <a href="../8f75658f49666993715529bf401b3831b40f2e31/" class="commit-node commit-node--collapsed" title="Declare `app/views/notes/index.html.erb`
"></a>
                <a href="../47cc28394bea53c6758fa7e419c7c57629f07d35/" class="commit-node commit-node--collapsed" title="Render `&lt;a&gt;` containing `&quot;Share a Note&quot;`
"></a>
                <a href="../12fb0589a0eb42626c32c00e2632db7a83182b9f/" class="commit-node commit-node--collapsed" title="Link to `&quot;/&quot;`
"></a>
                <a href="../10ff602f121bf86b55ac2f1ad3b9291e39226509/" class="commit-node commit-node--collapsed" title="Declare `GET /notes/new` route
"></a>
                <a href="../5781899e93eeb3f5c1668de4a8baa34355f417ef/" class="commit-node commit-node--collapsed" title="Declare `app/views/notes/new.html.erb` view
"></a>
                <a href="../1323c250061677add7cef1378c194fb1698bf076/" class="commit-node commit-node--collapsed" title="Render `&lt;label&gt;` and `&lt;textarea&gt;`
"></a>
                <a href="../23dcf81458778c6ecc1dae7168c9307f66292eeb/" class="commit-node commit-node--collapsed" title="Render `&lt;button&gt;` in `notes#new` template
"></a>
                <a href="../b8cd908169d83a384f0ed204550d656277d871db/" class="commit-node commit-node--collapsed" title="Render `&lt;form&gt;` element in `notes#new` template
"></a>
                <a href="../dd75568f8b3c9f2f7f39db79076e6ed49eca3e21/" class="commit-node commit-node--collapsed" title="Declare a `POST /notes` route
"></a>
                <a href="../e874f9a0af17434749072a6c598ce5dc3a7df925/" class="commit-node commit-node--collapsed" title="Declare `notes#create` view template
"></a>
                <a href="../6c0711c95585200b00cc90ef63ffcb2bdba4e83e/" class="commit-node commit-node--collapsed" title="Render content from `params`
"></a>
                <a href="../b196289a08d4deb02491bbb4db8f03ffec6e5b97/" class="commit-node commit-node--collapsed" title="Add `name=&quot;content&quot;` to `&lt;textarea&gt;`
"></a>
                <a href="../c2262f2fedaf5865460a1924be98ffa11c854217/" class="commit-node commit-node--collapsed" title="Enable Request Forgery Protection in `test`
"></a>
                <a href="../27514635db143849a6e42de9af5626f57f67eb05/" class="commit-node commit-node--collapsed" title="Use `form_tag` instead of `&lt;form&gt;`
"></a>
                <a href="../d9cd562c5596c9fe79db1fcb20075799dbc7c2ed/" class="commit-node commit-node--collapsed" title="Render `&lt;form&gt;` with `form_tag` with `form_with`
"></a>
                <a href="../ea36553a9a39e51a7734ec59fa53a067674ad2a5/" class="commit-node commit-node--collapsed" title="Build `&lt;textarea&gt;` with `text_area` helper
"></a>
                <a href="../3182b5a4abbe39b518192166aec07426cd359c8a/" class="commit-node commit-node--collapsed" title="Replace `&lt;label&gt;` with `#label` invocation
"></a>
                <a href="../888501891edc1f4a9d05164b123c9170712f4afd/" class="commit-node commit-node--collapsed" title="Replace `&lt;button&gt;` with `#submit` invocation
"></a>
                <a href="../c9ea45aa4514eb4279cac288c701eee9d9f2d504/" class="commit-node commit-node--collapsed" title="Use named route in `notes#index`
"></a>
                <a href="../4b9d86c47210737b3ad5c5c5ec2fe5a8f263a7d7/" class="commit-node commit-node--collapsed" title="Replace `&quot;/notes&quot;` with `notes_path` invocation
"></a>
                <a href="../2546878fd63777700b32d70036d8a4d3fc08f852/" class="commit-node commit-node--collapsed" title="Replace `post`, `get` declarations with `resources`
"></a>
                <a href="../6365c389fbd5eb0f324c1309bf13efd0451bb92d/" class="commit-node commit-node--collapsed" title="Rename `get &quot;/&quot;` route to &quot;root&quot;
"></a>
                <a href="../023b08bab349fa955b0674890c7a91314b189b03/" class="commit-node commit-node--collapsed" title="Replace `get &quot;/&quot;` declaration with `root`
"></a>
                <a href="../496aaa1c95ce60b181e9b8f6c13072066e41af9c/" class="commit-node commit-node--collapsed" title="Drive system tests with Headless Chrome Browser
"></a>
                <a href="../6ec492fee8ea8e96a56e768876b536090293b708/" class="commit-node commit-node--collapsed" title="Complete the first TDD Red-Green-Refactor Cycle
"></a>
                <a href="../c28f1f8e13a27a637c1e88960553d3d34952ffdb/" class="commit-node commit-node--collapsed" title="Replace root with Redirect to `/notes`
"></a>
                <a href="../ad84b0e28968efe3b12c016de8b1b2dadc8f9b5e/" class="commit-node commit-node--collapsed" title="Add failing system test
"></a>
                <a href="../0dc2e6d6d80719e51537009e3e335d8b9602b703/" class="commit-node commit-node--collapsed" title="Generate `Note` model
"></a>
                <a href="../5e77ee6b41cb06593b935be3222eac6f13d82826/" class="commit-node commit-node--collapsed" title="Run the `create_notes` migration
"></a>
                <a href="../9a666f761bf40e23b655a9ff811c24be806807de/" class="commit-node commit-node--collapsed" title="Render a list of all `Note` records `notes#index`
"></a>
                <a href="../3ac47da439acd9e10eb153824e40efa86af5dfff/" class="commit-node commit-node--collapsed" title="Render `notes#index` from controller action
"></a>
                <a href="../e9739139bc954de27b5fc6dffa3a10df7f1e706a/" class="commit-node commit-node--collapsed" title="Introduce `NotesController` tests
"></a>
                <a href="../e4812ffd01f02b6c98646d0b453dc7056f112384/" class="commit-node commit-node--collapsed" title="Disable CSRF-protection when in `test` environment
"></a>
                <a href="../4ce4be3237eb682eb6b340e5b1a99ebc8e26ab82/" class="commit-node commit-node--collapsed" title="Persist data in `POST /notes` requests to `notes`
"></a>
                <a href="../22af72a1687d9b960223a3d6c055718c6433234c/" class="commit-node commit-node--collapsed" title="Redirect to `/notes` after `POST /notes` requests
"></a>
                <a href="../df8d72a1d49abe15a5a9cdead74f71b7bc3607e2/" class="commit-node commit-node--collapsed" title="Validate presence of `notes.content`
"></a>
                <a href="./" class="commit-node commit-node--collapsed" title="Pass `model:` instead of `url:` in `notes#new`
" aria-current="page"></a>
                <a href="../d74173c1e48edafae5dba19b2e8e643b4aadfaa5/" class="commit-node commit-node--collapsed" title="Internationalize application's text
"></a>
                <a href="../9dac09a1b075b8ff486b109169d97e14ce7daf4e/" class="commit-node commit-node--collapsed" title="Use `FormBuilder` to internationalize labels
"></a>
            </nav>

            <div class="accordion__toggle">
              <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" role="img" class="accordion--desktop"><title>Expand History</title>
  <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L10.293 8 4.646 2.354a.5.5 0 010-.708z" clip-rule="evenodd"></path>
</svg>


              <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" role="img" class="accordion--mobile"><title>Expand History</title>
  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 01.708 0L8 10.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z" clip-rule="evenodd"></path>
</svg>

            </div>
          </div>

          <div class="accordion__opened">
            <div class="accordion__toggle accordion__toggle--fill">
              <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" role="img" class="accordion--desktop"><title>Collapse History</title>
  <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 010 .708L5.707 8l5.647 5.646a.5.5 0 01-.708.708l-6-6a.5.5 0 010-.708l6-6a.5.5 0 01.708 0z" clip-rule="evenodd"></path>
</svg>


              <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" role="img" class="accordion--mobile"><title>Collapse History</title>
  <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 01.708 0l6 6a.5.5 0 01-.708.708L8 5.707l-5.646 5.647a.5.5 0 01-.708-.708l6-6z" clip-rule="evenodd"></path>
</svg>

            </div>
          </div>
        </summary>

        <nav class="
          commit-history
          commit-history--full
          u-db-overflow-y--auto
          u-mb-overflow-x--scroll
        ">
<a href="../1106e13e2568ee68f1528e4ac3e42070ad24dfc6/" class="commit-node commit-node--full">              <p>[GENERATED] Initial Commit</p>

</a><a href="../65bf913763168f594a3873bcd9d0f6577602c986/" class="commit-node commit-node--full">              <p>Elaborate on the project&#39;s goals in the README</p>

</a><a href="../6d1482de076a391b14b055aba66413577d326997/" class="commit-node commit-node--full">              <p>Un-comment remaining <code>Gemfile</code> dependencies</p>

</a><a href="../92ce75d8cdd5545f738507b2e439ba0f3b484447/" class="commit-node commit-node--full">              <p>Create <code>git-read</code> GitHub Action</p>

</a><a href="../2f4ddaa45b452eef76f6d5401c8861982d665fe1/" class="commit-node commit-node--full">              <p>Execute the Rails-generated <code>bin/setup</code> script</p>

</a><a href="../22f0e2809ccc0630bd186b714b49c239e6f69ee2/" class="commit-node commit-node--full">              <p>Add <code>UserSharesAMessageTest</code></p>

</a><a href="../5518e5f2ee312fdad71bf543d0a697eba064a926/" class="commit-node commit-node--full">              <p>Add a failing system test</p>

</a><a href="../4be7e7af67b9800d40decc7ea7c19dae28c5212a/" class="commit-node commit-node--full">              <p>Declare <code>GET &quot;/&quot;</code> route</p>

</a><a href="../43174ba20f6820d5b9f452c1ce25c73c2c488bcf/" class="commit-node commit-node--full">              <p>Declare <code>NotesController</code></p>

</a><a href="../106f8b2f0547e5825caf558dc87297b6d1756b62/" class="commit-node commit-node--full">              <p>Extend from <code>ApplicationController</code></p>

</a><a href="../8f75658f49666993715529bf401b3831b40f2e31/" class="commit-node commit-node--full">              <p>Declare <code>app/views/notes/index.html.erb</code></p>

</a><a href="../47cc28394bea53c6758fa7e419c7c57629f07d35/" class="commit-node commit-node--full">              <p>Render <code>&lt;a&gt;</code> containing <code>&quot;Share a Note&quot;</code></p>

</a><a href="../12fb0589a0eb42626c32c00e2632db7a83182b9f/" class="commit-node commit-node--full">              <p>Link to <code>&quot;/&quot;</code></p>

</a><a href="../10ff602f121bf86b55ac2f1ad3b9291e39226509/" class="commit-node commit-node--full">              <p>Declare <code>GET /notes/new</code> route</p>

</a><a href="../5781899e93eeb3f5c1668de4a8baa34355f417ef/" class="commit-node commit-node--full">              <p>Declare <code>app/views/notes/new.html.erb</code> view</p>

</a><a href="../1323c250061677add7cef1378c194fb1698bf076/" class="commit-node commit-node--full">              <p>Render <code>&lt;label&gt;</code> and <code>&lt;textarea&gt;</code></p>

</a><a href="../23dcf81458778c6ecc1dae7168c9307f66292eeb/" class="commit-node commit-node--full">              <p>Render <code>&lt;button&gt;</code> in <code>notes#new</code> template</p>

</a><a href="../b8cd908169d83a384f0ed204550d656277d871db/" class="commit-node commit-node--full">              <p>Render <code>&lt;form&gt;</code> element in <code>notes#new</code> template</p>

</a><a href="../dd75568f8b3c9f2f7f39db79076e6ed49eca3e21/" class="commit-node commit-node--full">              <p>Declare a <code>POST /notes</code> route</p>

</a><a href="../e874f9a0af17434749072a6c598ce5dc3a7df925/" class="commit-node commit-node--full">              <p>Declare <code>notes#create</code> view template</p>

</a><a href="../6c0711c95585200b00cc90ef63ffcb2bdba4e83e/" class="commit-node commit-node--full">              <p>Render content from <code>params</code></p>

</a><a href="../b196289a08d4deb02491bbb4db8f03ffec6e5b97/" class="commit-node commit-node--full">              <p>Add <code>name=&quot;content&quot;</code> to <code>&lt;textarea&gt;</code></p>

</a><a href="../c2262f2fedaf5865460a1924be98ffa11c854217/" class="commit-node commit-node--full">              <p>Enable Request Forgery Protection in <code>test</code></p>

</a><a href="../27514635db143849a6e42de9af5626f57f67eb05/" class="commit-node commit-node--full">              <p>Use <code>form_tag</code> instead of <code>&lt;form&gt;</code></p>

</a><a href="../d9cd562c5596c9fe79db1fcb20075799dbc7c2ed/" class="commit-node commit-node--full">              <p>Render <code>&lt;form&gt;</code> with <code>form_tag</code> with <code>form_with</code></p>

</a><a href="../ea36553a9a39e51a7734ec59fa53a067674ad2a5/" class="commit-node commit-node--full">              <p>Build <code>&lt;textarea&gt;</code> with <code>text_area</code> helper</p>

</a><a href="../3182b5a4abbe39b518192166aec07426cd359c8a/" class="commit-node commit-node--full">              <p>Replace <code>&lt;label&gt;</code> with <code>#label</code> invocation</p>

</a><a href="../888501891edc1f4a9d05164b123c9170712f4afd/" class="commit-node commit-node--full">              <p>Replace <code>&lt;button&gt;</code> with <code>#submit</code> invocation</p>

</a><a href="../c9ea45aa4514eb4279cac288c701eee9d9f2d504/" class="commit-node commit-node--full">              <p>Use named route in <code>notes#index</code></p>

</a><a href="../4b9d86c47210737b3ad5c5c5ec2fe5a8f263a7d7/" class="commit-node commit-node--full">              <p>Replace <code>&quot;/notes&quot;</code> with <code>notes_path</code> invocation</p>

</a><a href="../2546878fd63777700b32d70036d8a4d3fc08f852/" class="commit-node commit-node--full">              <p>Replace <code>post</code>, <code>get</code> declarations with <code>resources</code></p>

</a><a href="../6365c389fbd5eb0f324c1309bf13efd0451bb92d/" class="commit-node commit-node--full">              <p>Rename <code>get &quot;/&quot;</code> route to &quot;root&quot;</p>

</a><a href="../023b08bab349fa955b0674890c7a91314b189b03/" class="commit-node commit-node--full">              <p>Replace <code>get &quot;/&quot;</code> declaration with <code>root</code></p>

</a><a href="../496aaa1c95ce60b181e9b8f6c13072066e41af9c/" class="commit-node commit-node--full">              <p>Drive system tests with Headless Chrome Browser</p>

</a><a href="../6ec492fee8ea8e96a56e768876b536090293b708/" class="commit-node commit-node--full">              <p>Complete the first TDD Red-Green-Refactor Cycle</p>

</a><a href="../c28f1f8e13a27a637c1e88960553d3d34952ffdb/" class="commit-node commit-node--full">              <p>Replace root with Redirect to <code>/notes</code></p>

</a><a href="../ad84b0e28968efe3b12c016de8b1b2dadc8f9b5e/" class="commit-node commit-node--full">              <p>Add failing system test</p>

</a><a href="../0dc2e6d6d80719e51537009e3e335d8b9602b703/" class="commit-node commit-node--full">              <p>Generate <code>Note</code> model</p>

</a><a href="../5e77ee6b41cb06593b935be3222eac6f13d82826/" class="commit-node commit-node--full">              <p>Run the <code>create_notes</code> migration</p>

</a><a href="../9a666f761bf40e23b655a9ff811c24be806807de/" class="commit-node commit-node--full">              <p>Render a list of all <code>Note</code> records <code>notes#index</code></p>

</a><a href="../3ac47da439acd9e10eb153824e40efa86af5dfff/" class="commit-node commit-node--full">              <p>Render <code>notes#index</code> from controller action</p>

</a><a href="../e9739139bc954de27b5fc6dffa3a10df7f1e706a/" class="commit-node commit-node--full">              <p>Introduce <code>NotesController</code> tests</p>

</a><a href="../e4812ffd01f02b6c98646d0b453dc7056f112384/" class="commit-node commit-node--full">              <p>Disable CSRF-protection when in <code>test</code> environment</p>

</a><a href="../4ce4be3237eb682eb6b340e5b1a99ebc8e26ab82/" class="commit-node commit-node--full">              <p>Persist data in <code>POST /notes</code> requests to <code>notes</code></p>

</a><a href="../22af72a1687d9b960223a3d6c055718c6433234c/" class="commit-node commit-node--full">              <p>Redirect to <code>/notes</code> after <code>POST /notes</code> requests</p>

</a><a href="../df8d72a1d49abe15a5a9cdead74f71b7bc3607e2/" class="commit-node commit-node--full">              <p>Validate presence of <code>notes.content</code></p>

</a><a href="./" class="commit-node commit-node--full" aria-current="page">              <p>Pass <code>model:</code> instead of <code>url:</code> in <code>notes#new</code></p>

</a><a href="../d74173c1e48edafae5dba19b2e8e643b4aadfaa5/" class="commit-node commit-node--full">              <p>Internationalize application&#39;s text</p>

</a><a href="../9dac09a1b075b8ff486b109169d97e14ce7daf4e/" class="commit-node commit-node--full">              <p>Use <code>FormBuilder</code> to internationalize labels</p>

</a>        </nav>
      </details>

      <article class="
        commit-content
        commit-content--double
        content__item
        content__item--grow
      ">
        <section class="commit commit--message">

          <h1 id="pass-model-instead-of-url-in-notes-new">Pass <code>model:</code> instead of <code>url:</code> in <code>notes#new</code></h1>

<p>After the previous commit, an invalid submission to the <code>notes#create</code>
action results in a re-rendering of the <code>notes#new</code> template. When
re-rendering the <code>notes#new</code> template, the controller could pass a
reference to the invalid <code>Note</code> instance to pre-populate the <code>&lt;form&gt;</code>
element&rsquo;s fields with the previously submitted values.</p>

<p>Unfortunately, the <code>&lt;form&gt;</code> element in the <code>notes#new</code> template doesn&rsquo;t
use a reference to a <code>Note</code> instance at all. Instead, <a href="https://api.rubyonrails.org/v5.2/classes/ActionView/Helpers/FormHelper.html#method-i-form_with">it passes a value
for the <code>url:</code> key to the <code>form_with</code> helper</a>. When the
<code>url:</code> key is replaced with a <code>model:</code> key that references an instance
of <code>Note</code>, the structure of the request body submitted to <code>POST /notes</code>.</p>

<p>Instead of the <a href="https://api.rubyonrails.org/v5.2/classes/ActionView/Helpers/FormBuilder.html"><code>FormBuilder</code></a> building a <code>&lt;textarea&gt;</code>
element with <code>name=&quot;content&quot;</code>, a <code>form_with</code> passed a <code>model:</code> reference
uses the <a href="https://api.rubyonrails.org/v5.2/classes/ActiveModel/Naming.html#method-i-model_name"><code>Note.model_name</code></a> to namespace the <code>name</code>
attribute with <code>note</code>, and renders <code>&lt;textarea name=&quot;note[content]&quot;&gt;</code>.</p>

<p>When the server responds to a <code>POST /notes</code> request submitted by such a
<code>&lt;form&gt;</code>, the values are nested within a key of that namespace.</p>

<p>In our case, <code>&lt;textarea name=&quot;note[content]&quot;&gt;</code> results in
<a href="https://api.rubyonrails.org/v5.2/classes/ActionController/StrongParameters.html"><code>strong_params</code></a>-compliant
<code>params</code> helper that can access the <code>content</code> value by chaining
<a href="https://api.rubyonrails.org/v5.2/classes/ActionController/Parameters.html#method-i-require"><code>#require</code></a> and <a href="https://api.rubyonrails.org/v5.2/classes/ActionController/Parameters.html#method-i-permit"><code>#permit</code></a>:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:note</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:content</span><span class="p">)</span>
</code></pre></div>
        </section>

          <aside class="commit commit--diff commit--long-content">
              <details
  id="app/controllers/notes_controller.rb"
  open
  class="file"
>
  <summary class="file__name">
    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" role="img" class="file__toggle file__toggle--close"><title>Collapse app/controllers/notes_controller.rb</title>
  <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 01.708 0l6 6a.5.5 0 01-.708.708L8 5.707l-5.646 5.647a.5.5 0 01-.708-.708l6-6z" clip-rule="evenodd"></path>
</svg>


    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" role="img" class="file__toggle file__toggle--open"><title>Expand app/controllers/notes_controller.rb</title>
  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 01.708 0L8 10.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z" clip-rule="evenodd"></path>
</svg>


    <code>
      app/controllers/notes_controller.rb
    </code>
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/app/controllers/notes_controller.rb b/app/controllers/notes_controller.rb
index 8375672..b16a6fe 100644
</span><span class="gd">--- a/app/controllers/notes_controller.rb
</span><span class="gi">+++ b/app/controllers/notes_controller.rb
</span><span class="p">@@ -13,13 +13,21 @@</span> class NotesController &lt; ApplicationController
     if note.save
       redirect_to notes_url
     else
<span class="gd">-      render(:new, status: :unprocessable_entity)
</span><span class="gi">+      render(:new, status: :unprocessable_entity, locals: { note: note })
</span>     end
   end
 
<span class="gi">+  def new
+    note = Note.new
+
+    render(locals: {
+      note: note,
+    })
+  end
+
</span>   private
 
   def note_params
<span class="gd">-    params.to_unsafe_h.slice(:content)
</span><span class="gi">+    params.require(:note).permit(:content)
</span>   end
 end
</code></pre></div></details>

              <details
  id="app/views/notes/new.html.erb"
  open
  class="file"
>
  <summary class="file__name">
    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" role="img" class="file__toggle file__toggle--close"><title>Collapse app/views/notes/new.html.erb</title>
  <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 01.708 0l6 6a.5.5 0 01-.708.708L8 5.707l-5.646 5.647a.5.5 0 01-.708-.708l6-6z" clip-rule="evenodd"></path>
</svg>


    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" role="img" class="file__toggle file__toggle--open"><title>Expand app/views/notes/new.html.erb</title>
  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 01.708 0L8 10.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z" clip-rule="evenodd"></path>
</svg>


    <code>
      app/views/notes/new.html.erb
    </code>
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/app/views/notes/new.html.erb b/app/views/notes/new.html.erb
index 53dc22c..5b230bb 100644
</span><span class="gd">--- a/app/views/notes/new.html.erb
</span><span class="gi">+++ b/app/views/notes/new.html.erb
</span><span class="p">@@ -1,4 +1,4 @@</span>
<span class="gd">-&lt;%= form_with(url: notes_path, method: :post, local: true) do |form| %&gt;
</span><span class="gi">+&lt;%= form_with(model: note, method: :post, local: true) do |form| %&gt;
</span>   &lt;%= form.label(:content, "Message") %&gt;
   &lt;%= form.text_area(:content) %&gt;
 
</code></pre></div></details>

              <details
  id="test/controllers/notes_controller_test.rb"
  open
  class="file"
>
  <summary class="file__name">
    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" role="img" class="file__toggle file__toggle--close"><title>Collapse test/controllers/notes_controller_test.rb</title>
  <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 01.708 0l6 6a.5.5 0 01-.708.708L8 5.707l-5.646 5.647a.5.5 0 01-.708-.708l6-6z" clip-rule="evenodd"></path>
</svg>


    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" role="img" class="file__toggle file__toggle--open"><title>Expand test/controllers/notes_controller_test.rb</title>
  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 01.708 0L8 10.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z" clip-rule="evenodd"></path>
</svg>


    <code>
      test/controllers/notes_controller_test.rb
    </code>
  </summary>

<div class="highlight"><pre class="highlight diff"><code><span class="gh">diff --git a/test/controllers/notes_controller_test.rb b/test/controllers/notes_controller_test.rb
index 2d64375..b27a5f8 100644
</span><span class="gd">--- a/test/controllers/notes_controller_test.rb
</span><span class="gi">+++ b/test/controllers/notes_controller_test.rb
</span><span class="p">@@ -4,7 +4,7 @@</span> class NotesControllerTest &lt; ActionDispatch::IntegrationTest
   test "#create persists a Note record" do
     content = "Hello, World"
 
<span class="gd">-    post notes_path, params: { content: content }
</span><span class="gi">+    post notes_path, params: { note: { content: content } }
</span> 
     assert_equal Note.pluck(:content), [content]
   end
<span class="p">@@ -12,15 +12,15 @@</span> class NotesControllerTest &lt; ActionDispatch::IntegrationTest
   test "#create redirects to /notes" do
     note_attributes = { content: "Hello, World" }
 
<span class="gd">-    post notes_path, params: note_attributes
</span><span class="gi">+    post notes_path, params: { note: note_attributes }
</span> 
     assert_redirected_to notes_url
   end
 
   test "#create with invalid data responds with unprocessable entity" do
<span class="gd">-    note_attributes = {}
</span><span class="gi">+    note_attributes = { content: "" }
</span> 
<span class="gd">-    post notes_path, params: note_attributes
</span><span class="gi">+    post notes_path, params: { note: note_attributes }
</span> 
     assert_response :unprocessable_entity
   end
</code></pre></div></details>

          </aside>
      </article>
    </main>
  </body>
</html>
